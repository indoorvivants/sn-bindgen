<html><head><title>SN bindgen: Limitations</title><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/tomorrow-night-blue.min.css" /><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/scala.min.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/c.min.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" href="/assets/styles.css" /><link rel="stylesheet" href="/assets/tailwind.css" /><script src="/assets/search.js" defer="defer"></script><script src="/assets/search-index.js" defer="defer"></script><link rel="stylesheet" href="/assets/subatomic-search.css" /><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /></head><body onclick="SubatomicSearchFrontend.sayHello()" class="bg-gradient-to-r from-emerald-800 to-sky-700 mt-4 w-full"><header class="flex m-2 mb-4 md:m-auto md:w-11/12 lg:max-w-7xl flex-col md:flex-row md:items-center justify-between mb-2"><div><a class="block text-6xl text-white" href="/">SN bindgen</a><p class="text-white">Scala 3 Native binding generator to C libraries</p></div><div id="searchContainer"></div><div class="site-links"><a href="https://github.com/indoorvivants/sn-bindgen"><img class="w-12 opacity-70 hover:opacity-100" src="https://cdn.svgporn.com/logos/github-icon.svg" /></a></div></header><main class="rounded-xl bg-white m-2 mb-4 md:m-auto md:w-11/12 lg:max-w-7xl p-4 flex flex-col-reverse md:flex-row gap-6"><aside class="lg:w-64 shrink-1 lg:shrink-0 grow-0 md:border-r-2 max-w-[300px] border-slate-200 pr-2"><ul class="text-2xl p-4 block"><li><a class="" href="/index.html">Home</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/quickstart/index.html">Quick start</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/semantics/index.html">Semantics </a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/exports/index.html">Exports </a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/cookbook/index.html">Cookbook</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/motivation/index.html">Motivation</a><ul class="text-xl p-2 block"></ul></li><li><a class="font-bold" href="/limitations/index.html">Limitations</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/configuration/index.html">Configuration </a><ul class="text-xl p-2 block"></ul></li></ul></aside><article class="grow-4 lg:max-w-6xl markdown"><div class="float-right p-3 rounded-md border-2 border-sky-700 max-w-12 m-4"><ul class="list-disc my-0 mx-2 text-sm"><li><a class="underline hover:no-underline text-sky-700 text-base" href="#definitions-like-define-some-value-25-are-not-exported">Definitions like `#define SOME_VALUE 25` are not exported</a></li><li><a class="underline hover:no-underline text-sky-700 text-base" href="#variadic-functions-are-not-rendered-only-before-version-0016">Variadic functions are not rendered (only before version 0.0.16)</a></li></ul></div><div><h2><a href="#definitions-like-define-some-value-25-are-not-exported" id="definitions-like-define-some-value-25-are-not-exported">Definitions like <code>#define SOME_VALUE 25</code> are not exported</a></h2>
<p>The world of C preprocessor directives is dark and impossible to formalise.
Potentially in the future we can add a mode to export the simplest of definitions
as global constants, but it's very limited and inflexible.</p>
<p>Currently we recommend adding C forwarder functions for those cases, e.g. in the example of OpenSSL:</p>
<pre><code class="language-c">#include &quot;openssl/evp.h&quot;

// preprocessor constants
int get_EVP_MAC_KEY() { return EVP_PKEY_HMAC; }

int get_EVP_MAX_MD_SIZE() { return EVP_MAX_MD_SIZE; }

// macro definition
void get_OpenSSL_add_all_digests() { OpenSSL_add_all_digests(); }
</code></pre>
<h2><a href="#variadic-functions-are-not-rendered-only-before-version-0016" id="variadic-functions-are-not-rendered-only-before-version-0016">Variadic functions are not rendered (only before version 0.0.16)</a></h2>
<p><strong>Note: in <code>bindgen &gt;= 0.0.17</code> and Scala Native 0.4.12+ you can now have variadic functions</strong></p>
<p>Scala Native does support constructing a <code>va_list</code>, but a function taking such list must exist in the first place.</p>
<p>In the case of, for example, cURL, the <a href="https://github.com/curl/curl/blob/master/include/curl/curl.h#L2889">public interface</a> is defined in terms of <code>...</code> and there's
nothing in C that allows you to call a variadic function if all you have is a value of <code>va_list</code>.</p>
<p>The layout of said <code>va_list</code> also varies by platform.</p>
</div></article></main><footer class="text-center m-4 p-4 text-lg text-white font-bold m-auto w-full">Â© 2021-2024 Anton Sviridov</footer><script src="https://www.googletagmanager.com/gtag/js?id=G-2V7BY56Z37"></script><script> window.dataLayer = window.dataLayer || [];
              function gtag(){window.dataLayer.push(arguments);}
              gtag('js', new Date());

              gtag('config', 'G-2V7BY56Z37');</script></body></html>