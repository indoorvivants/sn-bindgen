<html><head><title>sn-bindgen: Quick start</title><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/tomorrow-night-blue.min.css" /><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/scala.min.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/c.min.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/dockerfile.min.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" href="/assets/styles.css" /><link rel="stylesheet" href="/assets/tailwind.css" /><script src="/assets/search.js" defer="defer"></script><script src="/assets/search-index.js" defer="defer"></script><link rel="stylesheet" href="/assets/subatomic-search.css" /><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /></head><body onclick="SubatomicSearchFrontend.sayHello()" class="bg-gradient-to-r from-emerald-800 to-sky-700 mt-4 w-full"><header class="flex m-2 mb-4 md:m-auto md:w-11/12 lg:max-w-7xl flex-col md:flex-row md:items-center justify-between mb-2"><div><a class="block text-6xl text-white" href="/">sn-bindgen</a><p class="text-white">Scala 3 Native binding generator to C libraries</p></div><div id="searchContainer"></div><div class="site-links"><a href="https://github.com/indoorvivants/sn-bindgen"><img class="w-12 opacity-70 hover:opacity-100" src="https://cdn.svgporn.com/logos/github-icon.svg" /></a></div></header><main class="rounded-xl bg-white m-2 mb-4 md:m-auto md:w-11/12 lg:max-w-7xl p-4 flex flex-col-reverse md:flex-row gap-6"><aside class="lg:w-64 shrink-1 lg:shrink-0 grow-0 md:border-r-2 max-w-[300px] border-slate-200 pr-2"><ul class="text-2xl p-4 block"><li><a class="" href="/index.html">Home</a><ul class="text-xl p-2 block"></ul></li><li><a class="font-bold" href="/quickstart/index.html">Quick start</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/configuration/index.html">Configuration </a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/semantics/index.html">Semantics </a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/cookbook/index.html">Cookbook</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/exports/index.html">Exports </a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/limitations/index.html">Limitations</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/reporting-issues/index.html">Reporting issues</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/motivation/index.html">Motivation</a><ul class="text-xl p-2 block"></ul></li></ul></aside><article class="grow-4 lg:max-w-6xl markdown"><div class="float-right p-3 rounded-md border-2 border-sky-700 max-w-12 m-4"><ul class="list-disc my-0 mx-2 text-sm"><li><a class="underline hover:no-underline text-sky-700 text-base" href="#pre-requisites">Pre-requisites</a></li><li><a class="underline hover:no-underline text-sky-700 text-base" href="#supported-platforms">Supported platforms</a></li><li><a class="underline hover:no-underline text-sky-700 text-base" href="#installation">Installation</a><ul class="list-disc my-0 mx-2 text-sm"><li><a class="underline hover:no-underline text-sky-700 text-base" href="#cli">CLI</a></li><li><a class="underline hover:no-underline text-sky-700 text-base" href="#sbt-plugin-stable">SBT plugin (stable)</a></li><li><a class="underline hover:no-underline text-sky-700 text-base" href="#sbt-plugin-latest">SBT plugin (latest)</a></li></ul></li><li><a class="underline hover:no-underline text-sky-700 text-base" href="#usage">Usage</a></li></ul></div><div><p>Quickest way to start would be to use the <a href="https://github.com/keynmol/sn-bindgen-template/">template</a>.</p>
<p>For more involved examples, see a <a href="https://github.com/keynmol/sn-bindgen-examples/">dedicated repository</a></p>
<h2><a href="#pre-requisites" id="pre-requisites">Pre-requisites</a></h2>
<p>The bindgen's binary is dynamically linked against LLVM 17.</p>
<p>Therefore you must have it installed on the system that <em>generates</em> the code, you can follow <a href="https://scala-native.readthedocs.io/en/latest/user/setup.html#installing-clang-and-runtime-dependencies">Scala Native's instructions</a>.</p>
<p>The location of installed LLVM is baked into the binary and is:</p>
<ul>
<li><code>/usr/lib/llvm-17/...</code> on Linux</li>
<li><code>/opt/homebrew/opt/llvm@17/...</code> on ARM MacOS</li>
<li><code>/usr/local/opt/llvm@17/...</code> on Intel MacOS</li>
</ul>
<p>Code generated by bindgen has no runtime dependencies on bindgen, LLVM, or Clang.</p>
<h2><a href="#supported-platforms" id="supported-platforms">Supported platforms</a></h2>
<div class = "text-small">
    <style type="text/css">
        table,th,td {
            border: 1px solid lightgrey;
            border-collapse:collapse;
            padding: 6px;
        }
        th {
            background-color:lightgrey;
            font-weight: bold;
        }
    </style>
    <table>
        <thead>
            <tr>
                <th>OS</th>
                <th>Architecture</th>
                <th>Tested on CI</th>
                <th>Binary on Maven</th>
                <th>Binary on Github releases</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Linux</td>
                <td>x64</td>
                <td>✅</td>
                <td>✅</td>
                <td>✅</td>
            </tr>
            <tr>
                <td class='whitespace-nowrap'>Mac OS X</td>
                <td>x64</td>
                <td>✅</td>
                <td>✅</td>
                <td>✅</td>
            </tr>
            <tr>
                <td class='whitespace-nowrap'>Mac OS X</td>
                <td class='whitespace-nowrap'>ARM64 (Apple silicon)</td>
                <td>✅</td>
                <td>✅</td>
                <td>✅</td>
            </tr>
            <tr>
                <td>Windows</td>
                <td>x64</td>
                <td>✅</td>
                <td>✅</td>
                <td>✅</td>
            </tr>
            <tr>
                <td>Linux</td>
                <td>arm64</td>
                <td>✅</td>
                <td>✅</td>
                <td>✅</td>
            </tr>
            <tr>
                <td>Windows</td>
                <td>arm64</td>
                <td>❌</td>
                <td>❌</td>
                <td>❌</td>
            </tr>
        </tbody>
    </table>
</div>
<h2><a href="#installation" id="installation">Installation</a></h2>
<h3><a href="#cli" id="cli">CLI</a></h3>
<ul>
<li>You can download binaries for all supported platforms on <a href="https://github.com/indoorvivants/sn-bindgen/releases/latest">Github releases</a></li>
<li>You can install the binary via Coursier: <code>cs install sn-bindgen --contrib</code></li>
<li>You can install the binary (and required LLVM version) using Homebrew: <code>brew install indoorvivants/tap/sn-bindgen</code></li>
</ul>
<h3><a href="#sbt-plugin-stable" id="sbt-plugin-stable">SBT plugin (stable)</a></h3>
<p><strong>project/plugins.sbt</strong></p>
<pre><code class="language-scala">addSbtPlugin(&quot;com.indoorvivants&quot; % &quot;bindgen-sbt-plugin&quot; % &quot;0.2.2&quot;)
</code></pre>
<h3><a href="#sbt-plugin-latest" id="sbt-plugin-latest">SBT plugin (latest)</a></h3>
<p><strong>project/plugins.sbt</strong></p>
<pre><code class="language-scala">resolvers += Resolver.sonatypeRepo(&quot;snapshots&quot;)
addSbtPlugin(&quot;com.indoorvivants&quot; % &quot;bindgen-sbt-plugin&quot; % &quot;0.2.2+5-0b08b8de-SNAPSHOT&quot;)
</code></pre>
<h2><a href="#usage" id="usage">Usage</a></h2>
<p>This covers usage as part of an SBT project</p>
<p><strong>build.sbt</strong></p>
<pre><code class="language-scala">// only add this line if you're living on the edge and using
// a version that has &quot;SNAPSHOT&quot; in it
resolvers += Resolver.sonatypeRepo(&quot;snapshots&quot;)
scalaVersion := &quot;3.2.2&quot;

enablePlugins(ScalaNativePlugin, BindgenPlugin)

import bindgen.interface.Binding

bindgenBindings := Seq(
  Binding
    .builder(
      /* 1 */  (Compile / resourceDirectory).value / &quot;scala-native&quot; / &quot;header.h&quot;,
      /* 2 */  &quot;libtest&quot;
    )
    .addCImport(&quot;header.h&quot;) /* 3 */
    .build
  )
)
</code></pre>
<ol>
<li>Path to the header file - in this example we're putting it into a location
recognised by Scala Native's SBT plugin, any sources there will be linked alongside
the Scala sources</li>
<li>Package name where generated definitions will be put</li>
<li>List of imports that will be added to generated C files (if there are any, see <a href="/semantics">Semantics</a> page for details)</li>
</ol>
<p>There are more settings available, see <a href="/configuration#sbt-plugin">Configuration</a> page for details.</p>
<p>Now all that is left to do is put some definitions into the header file:</p>
<div class = "flex-col w-full gap-4">
<div class = "w-12/12">
<p><strong>Source <code>C</code> code</strong></p>
<pre><code class="language-c">
    typedef enum { X = 1, Y = 2} bla;
    void sum(bla one, bla two);
    
</code></pre>
</div>
<div class = "w-12/12">
<p><strong>Generated <code>Scala</code> code</strong></p>
<pre><code class="language-scala">package libtest

import _root_.scala.scalanative.unsafe.*
import _root_.scala.scalanative.unsigned.*
import _root_.scala.scalanative.libc.*
import _root_.scala.scalanative.*

object predef:
  private[libtest] trait _BindgenEnumCUnsignedInt[T](using eq: T =:= CUnsignedInt):
    given Tag[T] = Tag.UInt.asInstanceOf[Tag[T]]
    extension (inline t: T)
     inline def value: CUnsignedInt = eq.apply(t)
     inline def int: CInt = eq.apply(t).toInt
     inline def uint: CUnsignedInt = eq.apply(t)


object enumerations:
  import predef.*
  /**
   * [bindgen] header: /tmp/4817470476137603924header.h
  */
  opaque type bla = CUnsignedInt
  object bla extends _BindgenEnumCUnsignedInt[bla]:
    given _tag: Tag[bla] = Tag.UInt
    inline def define(inline a: Long): bla = a.toUInt
    val X = define(1)
    val Y = define(2)
    inline def getName(inline value: bla): Option[String] =
      inline value match
        case X =&gt; Some(&quot;X&quot;)
        case Y =&gt; Some(&quot;Y&quot;)
        case _ =&gt; _root_.scala.None
    extension (a: bla)
      inline def &amp;(b: bla): bla = a &amp; b
      inline def |(b: bla): bla = a | b
      inline def is(b: bla): Boolean = (a &amp; b) == b


@extern
private[libtest] object extern_functions:
  import _root_.libtest.enumerations.*
  import _root_.libtest.predef.*
  /**
   * [bindgen] header: /tmp/4817470476137603924header.h
  */
  def sum(one : bla, two : bla): Unit = extern


object functions:
  import _root_.libtest.enumerations.*
  import _root_.libtest.predef.*
  import extern_functions.*
  export extern_functions.*

object types:
  export _root_.libtest.enumerations.*

object all:
  export _root_.libtest.enumerations.bla
  export _root_.libtest.functions.sum


</code></pre>
</div>
</div>
<p>After that in your Scala sources you can use <code>libtest</code> package to access the
generated bindings.</p>
</div></article></main><footer class="text-center m-4 p-4 text-lg text-white font-bold m-auto w-full">© 2021-2025 Anton Sviridov</footer><script src="https://www.googletagmanager.com/gtag/js?id=G-2V7BY56Z37"></script><script> window.dataLayer = window.dataLayer || [];
              function gtag(){window.dataLayer.push(arguments);}
              gtag('js', new Date());

              gtag('config', 'G-2V7BY56Z37');</script></body></html>