<html><head><title>sn-bindgen: Reporting issues</title><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/tomorrow-night-blue.min.css" /><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/scala.min.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/c.min.js"></script><script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/languages/dockerfile.min.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" href="/assets/styles.css" /><link rel="stylesheet" href="/assets/tailwind.css" /><script src="/assets/search.js" defer="defer"></script><script src="/assets/search-index.js" defer="defer"></script><link rel="stylesheet" href="/assets/subatomic-search.css" /><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /></head><body onclick="SubatomicSearchFrontend.sayHello()" class="bg-gradient-to-r from-emerald-800 to-sky-700 mt-4 w-full"><header class="flex m-2 mb-4 md:m-auto md:w-11/12 lg:max-w-7xl flex-col md:flex-row md:items-center justify-between mb-2"><div><a class="block text-6xl text-white" href="/">sn-bindgen</a><p class="text-white">Scala 3 Native binding generator to C libraries</p></div><div id="searchContainer"></div><div class="site-links"><a href="https://github.com/indoorvivants/sn-bindgen"><img class="w-12 opacity-70 hover:opacity-100" src="https://cdn.svgporn.com/logos/github-icon.svg" /></a></div></header><main class="rounded-xl bg-white m-2 mb-4 md:m-auto md:w-11/12 lg:max-w-7xl p-4 flex flex-col-reverse md:flex-row gap-6"><aside class="lg:w-64 shrink-1 lg:shrink-0 grow-0 md:border-r-2 max-w-[300px] border-slate-200 pr-2"><ul class="text-2xl p-4 block"><li><a class="" href="/index.html">Home</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/quickstart/index.html">Quick start</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/configuration/index.html">Configuration </a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/semantics/index.html">Semantics </a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/cookbook/index.html">Cookbook</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/exports/index.html">Exports </a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/limitations/index.html">Limitations</a><ul class="text-xl p-2 block"></ul></li><li><a class="font-bold" href="/reporting-issues/index.html">Reporting issues</a><ul class="text-xl p-2 block"></ul></li><li><a class="" href="/motivation/index.html">Motivation</a><ul class="text-xl p-2 block"></ul></li></ul></aside><article class="grow-4 lg:max-w-6xl markdown"><div><h2><a href="#reporting-issues" id="reporting-issues">Reporting issues</a></h2>
<p>Sometimes, sn-bindgen just doesn't work for a particular header file. Either it encounters a shape of C code it hasn't seen before, or the system header detection logic is faulty, or any of the heuristic algorithms for naming anonymous definitions breaks.</p>
<p>The expectation is that <strong>sn-bindgen should be able to handle any pure C header file</strong> and generate code that compiles and runs. If that doesn't happen, it might be a bug. Please report it.</p>
<p>An ideal bug report would contain a minimised, self-contained, small C header code that directly reproduces the issue. Sometimes that's not possible or too difficult – perhaps the library in question has a lot of interconnected files and definitions, or a complicated dependency setup.</p>
<p>In that case, a good bug report would use this <a href="https://docs.docker.com/reference/dockerfile/">Dockerfile</a> below and modify it just enough to trigger the issue. The person working on the issue should be able to just</p>
<ol>
<li>grab the Dockerfile contents from the issue,</li>
<li>put it in a <code>Dockerfile</code> file in an empty folder,</li>
<li>run <code>docker build .</code>,</li>
<li>see bindgen or compilation failing</li>
</ol>
<pre><code class="language-dockerfile">FROM ubuntu:22.04

ENV BINDGEN_VERSION=0.2.2
ENV LLVM_VERSION=17
ENV SCALA_NATIVE_VERSION=0.5.6
ENV SCALA_VERSION=3.6.3

RUN apt update &amp;&amp; apt install -y wget curl lsb-release software-properties-common gnupg &amp;&amp; \
  wget https://github.com/indoorvivants/sn-bindgen/releases/download/v$BINDGEN_VERSION/sn-bindgen-$(uname -m)-pc-linux &amp;&amp; \
  mv sn-bindgen-$(uname -m)-pc-linux /usr/bin/sn-bindgen &amp;&amp; chmod +x /usr/bin/sn-bindgen

RUN wget https://apt.llvm.org/llvm.sh &amp;&amp; chmod +x llvm.sh &amp;&amp; ./llvm.sh $LLVM_VERSION

ENV LLVM_BIN=/usr/lib/llvm-$LLVM_VERSION/bin

RUN curl -Lo /usr/bin/scala-cli https://raw.githubusercontent.com/VirtusLab/scala-cli/refs/heads/main/scala-cli.sh &amp;&amp; chmod +x /usr/bin/scala-cli &amp;&amp; \
    scala-cli run -e &quot;println()&quot; -S $SCALA_VERSION --native --native-version $SCALA_NATIVE_VERSION --server=false

WORKDIR /reproduction

# Modify the commands below to reproduce the issue

# 1. Generate Scala file
RUN sn-bindgen --header /usr/include/z3.h \
               --package z3 --scala --out z3.scala \
               --llvm-bin $LLVM_BIN

# 2. Generate C file
RUN sn-bindgen --header /usr/include/z3.h \
               --package z3 --c --out z3-glue.c \
               --llvm-bin $LLVM_BIN

# 3. Make sure Scala code compiles
RUN scala-cli compile . --native --native-version $SCALA_NATIVE_VERSION -S $SCALA_VERSION --server=false
</code></pre>
</div></article></main><footer class="text-center m-4 p-4 text-lg text-white font-bold m-auto w-full">© 2021-2025 Anton Sviridov</footer><script src="https://www.googletagmanager.com/gtag/js?id=G-2V7BY56Z37"></script><script> window.dataLayer = window.dataLayer || [];
              function gtag(){window.dataLayer.push(arguments);}
              gtag('js', new Date());

              gtag('config', 'G-2V7BY56Z37');</script></body></html>